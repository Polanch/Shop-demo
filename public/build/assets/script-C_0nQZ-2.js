const p=document.getElementById("hamburger-menu"),y=document.querySelector(".sidebar");p&&(p.addEventListener("click",()=>{p.classList.toggle("active"),y.classList.toggle("active")}),y.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{p.classList.remove("active"),y.classList.remove("active")})}),document.addEventListener("click",e=>{!p.contains(e.target)&&!y.contains(e.target)&&(p.classList.remove("active"),y.classList.remove("active"))}));const h=document.getElementById("alertWindow");if(h){let e=function(){h.classList.add("fade-out"),setTimeout(()=>{h.style.display="none",h.classList.remove("fade-out")},400)};var tt=e;const t=document.getElementById("closeAlert");h.style.display="block",setTimeout(()=>{e()},3e3),t.addEventListener("click",()=>{e()})}document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("mode-btns"),e=document.getElementById("modes");t.addEventListener("click",()=>{const n=t.dataset.moon,o=t.dataset.sun;t.dataset.mode==="dark"?(e.src=o,t.dataset.mode="light",t.classList.add("light")):(e.src=n,t.dataset.mode="dark",t.classList.remove("light"))})});const D=document.getElementById("dd-btn"),g=document.querySelector(".drop-down-window");D.addEventListener("click",t=>{t.stopPropagation(),D.classList.toggle("active"),g.style.display==="flex"?g.style.display="none":g.style.display="flex"});g.addEventListener("click",t=>{t.stopPropagation()});document.addEventListener("click",()=>{g.style.display="none",D.classList.remove("active")});document.querySelectorAll(".size-menu").forEach(t=>{const e=t.querySelectorAll(".sizes");e.forEach(n=>{n.addEventListener("click",()=>{e.forEach(o=>o.classList.remove("active")),n.classList.add("active")})})});const i=document.getElementById("product_stock"),b=document.getElementById("stock-display"),x=document.getElementById("stockMinus"),T=document.getElementById("stockPlus"),R=document.getElementById("product_status");function q(){let t=parseInt(i.value);R.value=t>0?"Available":"Unavailable"}i&&b&&i.addEventListener("input",function(){b.textContent=this.value,q()});x&&T&&i&&(x.addEventListener("click",t=>{t.preventDefault();let e=parseInt(i.value);e>1&&(i.value=e-1,b.textContent=i.value,q())}),T.addEventListener("click",t=>{t.preventDefault();let e=parseInt(i.value);e<200&&(i.value=e+1,b.textContent=i.value,q())}));const M=document.querySelector(".add-product"),c=document.querySelector(".pop-window"),v=document.querySelector(".add-container"),f=document.querySelector(".edit-container"),l=document.querySelector(".confirm-container"),O=document.getElementById("closeModalAdd"),w=document.getElementById("closeModalEdit");function u(){c.style.display="none",v&&v.classList.remove("active"),f&&f.classList.remove("active"),l&&l.classList.remove("active")}function V(){c.style.display="flex",v&&v.classList.add("active"),f&&f.classList.remove("active")}function X(){c.style.display="flex",f&&f.classList.add("active"),v&&v.classList.remove("active")}M&&c&&(M.addEventListener("click",t=>{t.preventDefault(),V()}),c.addEventListener("click",t=>{t.target===c&&u()}),O&&O.addEventListener("click",t=>{t.preventDefault(),u()}),w&&w.addEventListener("click",t=>{t.preventDefault(),u()}));const Y=document.querySelectorAll(".edit-btn");Y.forEach(t=>{t.addEventListener("click",function(){const e=this.getAttribute("data-id"),n=this.getAttribute("data-name"),o=this.getAttribute("data-price"),d=this.getAttribute("data-size"),s=this.getAttribute("data-stock"),m=this.getAttribute("data-status");X();const Q=document.getElementById("editProductForm");Q.action=`/admin/products/${e}`,document.getElementById("edit_product_name").value=n,document.getElementById("edit_product_price").value=o,document.getElementById("edit_product_size").value=d,document.getElementById("edit_product_stock").value=s,document.getElementById("edit-stock-display").textContent=s,document.getElementById("edit_product_status").value=m})});const Z=document.querySelectorAll(".delete-btn");let r=null;function E(){const t=document.querySelector('meta[name="csrf-token"]');return t?t.getAttribute("content"):""}Z.forEach(t=>{t.addEventListener("click",function(){r=this.getAttribute("data-id"),c&&l&&(c.style.display="flex",l.classList.add("active"))})});const I=document.getElementById("confirmDeleteBtn"),S=document.getElementById("cancelDeleteBtn");I&&I.addEventListener("click",function(){if(!r)return;const t=document.createElement("form");t.method="POST",t.action=`/admin/products/${r}`;const e=document.createElement("input");e.type="hidden",e.name="_token",e.value=E();const n=document.createElement("input");n.type="hidden",n.name="_method",n.value="DELETE",t.appendChild(e),t.appendChild(n),document.body.appendChild(t),t.submit()});S&&S.addEventListener("click",function(){u(),r=null});const a=document.getElementById("edit_product_stock"),A=document.getElementById("edit-stock-display"),U=document.getElementById("editStockMinus"),$=document.getElementById("editStockPlus"),z=document.getElementById("edit_product_status");function P(){let t=parseInt(a.value);z&&(z.value=t>0?"Available":"Unavailable")}a&&A&&a.addEventListener("input",function(){A.textContent=this.value,P()});U&&$&&a&&(U.addEventListener("click",t=>{t.preventDefault();let e=parseInt(a.value);e>1&&(a.value=e-1,A.textContent=a.value,P())}),$.addEventListener("click",t=>{t.preventDefault();let e=parseInt(a.value);e<200&&(a.value=e+1,A.textContent=a.value,P())}));const F=document.querySelectorAll(".status-btn"),C=document.querySelector(".status-container"),W=document.querySelectorAll(".status-option"),N=document.getElementById("cancelStatusBtn");let k=null,_=null;F.length>0&&(F.forEach(t=>{t.addEventListener("click",function(){k=this.getAttribute("data-id"),_=this.getAttribute("data-status"),c&&C&&(c.style.display="flex",C.classList.add("active"),l&&l.classList.remove("active"),W.forEach(e=>{e.getAttribute("data-status")===_?e.classList.add("selected"):e.classList.remove("selected")}))})}),W.forEach(t=>{t.addEventListener("click",function(){const e=this.getAttribute("data-status");if(!k)return;const n=document.createElement("form");n.method="POST",n.action=`/admin/orders/${k}/status`;const o=document.createElement("input");o.type="hidden",o.name="_token",o.value=E();const d=document.createElement("input");d.type="hidden",d.name="_method",d.value="PUT";const s=document.createElement("input");s.type="hidden",s.name="status",s.value=e,n.appendChild(o),n.appendChild(d),n.appendChild(s),document.body.appendChild(n),n.submit()})}),N&&N.addEventListener("click",function(){u(),k=null,_=null}));const j=document.querySelectorAll(".delete-order-btn");let L=null;j.length>0&&(j.forEach(t=>{t.addEventListener("click",function(){L=this.getAttribute("data-id"),c&&l&&(c.style.display="flex",l.classList.add("active"),C&&C.classList.remove("active"))})}),I&&I.addEventListener("click",function(){if(L){const t=document.createElement("form");t.method="POST",t.action=`/admin/orders/${L}`;const e=document.createElement("input");e.type="hidden",e.name="_token",e.value=E();const n=document.createElement("input");n.type="hidden",n.name="_method",n.value="DELETE",t.appendChild(e),t.appendChild(n),document.body.appendChild(t),t.submit()}else if(r){const t=document.createElement("form");t.method="POST",t.action=`/admin/products/${r}`;const e=document.createElement("input");e.type="hidden",e.name="_token",e.value=E();const n=document.createElement("input");n.type="hidden",n.name="_method",n.value="DELETE",t.appendChild(e),t.appendChild(n),document.body.appendChild(t),t.submit()}}),S&&S.addEventListener("click",function(){u(),L=null,r=null}));const G=document.querySelectorAll(".toggle-status-btn");G.length>0&&G.forEach(t=>{t.addEventListener("click",function(){const e=this.getAttribute("data-id"),o=this.getAttribute("data-status")==="active"?"block":"unblock";if(confirm(`Are you sure you want to ${o} this user?`)){const d=document.createElement("form");d.method="POST",d.action=`/admin/users/${e}/toggle-status`;const s=document.createElement("input");s.type="hidden",s.name="_token",s.value=E();const m=document.createElement("input");m.type="hidden",m.name="_method",m.value="PUT",d.appendChild(s),d.appendChild(m),document.body.appendChild(d),d.submit()}})});const H=document.querySelectorAll(".delete-user-btn"),J=document.getElementById("confirmDeleteUserBtn"),K=document.getElementById("cancelDeleteUserBtn");let B=null;H.length>0&&(H.forEach(t=>{t.addEventListener("click",function(){B=this.getAttribute("data-id"),c&&l&&(c.style.display="flex",l.classList.add("active"))})}),J&&J.addEventListener("click",function(){if(B){const t=document.createElement("form");t.method="POST",t.action=`/admin/users/${B}`;const e=document.createElement("input");e.type="hidden",e.name="_token",e.value=E();const n=document.createElement("input");n.type="hidden",n.name="_method",n.value="DELETE",t.appendChild(e),t.appendChild(n),document.body.appendChild(t),t.submit()}}),K&&K.addEventListener("click",function(){u(),B=null}));
